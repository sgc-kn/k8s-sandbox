name: "platform"

sources:
  image:
    kind: "dockerimage"
    spec:
      tagfilter: '^v\d+\.\d+\.\d+-.*$'
      image: "ghcr.io/sgc-kn/platform"
      architecture: "amd64"

targets:
  version:
    kind: "file"
    spec:
      files:
        - "apps/platform/envs/*/version.yaml"
      searchpattern: true # enable glob in file
      matchpattern: 'image: .*sgc-kn/platform:.*'
      replacepattern: 'image: ghcr.io/sgc-kn/platform:{{ source "image" }}'
